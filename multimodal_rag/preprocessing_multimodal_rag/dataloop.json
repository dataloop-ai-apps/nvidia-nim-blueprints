{
  "name": "preprocess-multimodal-rag-bp",
  "version": "0.0.36",
  "attributes": {
    "Category": [
      "Pipeline",
      "Blueprint"
    ],
    "Pipeline Type": "GenAI",
    "Provider": "NVIDIA",
    "Developed By": "Dataloop",
    "Hub": [
      "Nvidia",
      "Dataloop"
    ],
    "Media Type": [
      "Text",
      "Document"
    ]
  },
  "displayName": "RAG Preprocessing Multimodal PDFs",
  "description": "NVIDIA blueprint for the preprocessing stage of a multimodal PDF RAG pipeline. Uses PDF-to-Chunks processing with OCR and recursive chunking, followed by embedding generation.",
  "scope": "public",
  "components": {
    "pipelineTemplates": [
      {
        "name": "RAG Preprocessing Multimodal PDFs",
        "description": "NVIDIA blueprint for the preprocessing stage of a multimodal PDF RAG pipeline. Extracts text from PDFs, applies OCR, chunks text, and generates vector embeddings.",
        "connections": [
          {
            "src": {
              "nodeId": "7bf0e347-64ca-4d6a-9ccf-c50ee8e02611",
              "portId": "8c97bdf9-4f1c-4b42-a25d-9e662239142d"
            },
            "tgt": {
              "nodeId": "d8f2a1c3-4b56-4e78-9012-3456789abcde",
              "portId": "a1234567-b890-cdef-1234-567890abcdef"
            },
            "condition": "{}"
          },
          {
            "src": {
              "nodeId": "d8f2a1c3-4b56-4e78-9012-3456789abcde",
              "portId": "b1234567-c890-def1-2345-678901abcdef"
            },
            "tgt": {
              "nodeId": "06a71a03-7318-4320-bdae-58af010facd3",
              "portId": "1d67c56a-2793-40f1-9f85-acfb0f67546f"
            },
            "condition": "{}"
          },
          {
            "src": {
              "nodeId": "06a71a03-7318-4320-bdae-58af010facd3",
              "portId": "17b4ee80-b7d3-405f-9938-d1da00e88d14"
            },
            "tgt": {
              "nodeId": "cfd9c1b1-5588-4c4d-9c49-cebe666e22b1",
              "portId": "910f6b87-eaed-480a-bef7-2f88e285718f"
            },
            "condition": "{}"
          }
        ],
        "startNodes": [
          {
            "nodeId": "7bf0e347-64ca-4d6a-9ccf-c50ee8e02611",
            "type": "root",
            "id": "e6883ebc-83f2-4552-891c-9caf98b1683c"
          }
        ],
        "nodes": [
          {
            "id": "7bf0e347-64ca-4d6a-9ccf-c50ee8e02611",
            "inputs": [
              {
                "portId": "4a163024-2846-431d-b7f9-63b28327bf29",
                "nodeId": "4a163024-2846-431d-b7f9-63b28327bf29",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "input"
              }
            ],
            "outputs": [
              {
                "portId": "8c97bdf9-4f1c-4b42-a25d-9e662239142d",
                "nodeId": "8c97bdf9-4f1c-4b42-a25d-9e662239142d",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "output"
              }
            ],
            "name": "Dataset",
            "type": "storage",
            "namespace": {
              "functionName": "clone_item",
              "projectName": "DataloopTasks",
              "serviceName": "pipeline-utils",
              "moduleName": "default_module",
              "packageName": "pipeline-utils"
            },
            "metadata": {
              "position": {
                "x": 10000,
                "y": 10100,
                "z": 0
              },
              "componentGroupName": "data",
              "repeatable": true
            }
          },
          {
            "id": "d8f2a1c3-4b56-4e78-9012-3456789abcde",
            "inputs": [
              {
                "portId": "a1234567-b890-cdef-1234-567890abcdef",
                "nodeId": "a1234567-b890-cdef-1234-567890abcdef",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "input"
              },
              {
                "portId": "d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6",
                "nodeId": "d1e2f3a4-b5c6-d7e8-f9a0-b1c2d3e4f5a6",
                "type": "Dataset",
                "name": "target_dataset",
                "displayName": "target_dataset",
                "io": "input"
              }
            ],
            "outputs": [
              {
                "portId": "b1234567-c890-def1-2345-678901abcdef",
                "nodeId": "b1234567-c890-def1-2345-678901abcdef",
                "type": "Item[]",
                "name": "items",
                "displayName": "items",
                "io": "output"
              }
            ],
            "name": "PDF to Chunks",
            "type": "custom",
            "namespace": {
              "functionName": "run",
              "serviceName": "pdf-processor-service",
              "moduleName": "pdf-processor-module",
              "packageName": "rag-pdf-processor"
            },
            "appName": "RAG PDF Processor",
            "dpkName": "rag-pdf-processor",
            "metadata": {
              "position": {
                "x": 10400,
                "y": 10100,
                "z": 0
              },
              "componentGroupName": "document-processing",
              "customNodeConfig": {
                "name": "PDF-to-Chunks",
                "to_correct_spelling": false,
                "ocr_from_images": true,
                "ocr_integration_method": "append_to_page",
                "use_markdown_extraction": true,
                "chunking_strategy": "recursive",
                "max_chunk_size": 300,
                "chunk_overlap": 40,
                "validation": {
                  "valid": true,
                  "errors": []
                }
              },
              "repeatable": true,
              "pipelineNodeName": "pdf-processor-node",
              "variableDataset": "chunks-dataset"
            }
          },
          {
            "id": "06a71a03-7318-4320-bdae-58af010facd3",
            "inputs": [
              {
                "portId": "1d67c56a-2793-40f1-9f85-acfb0f67546f",
                "nodeId": "1d67c56a-2793-40f1-9f85-acfb0f67546f",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "input"
              }
            ],
            "outputs": [
              {
                "portId": "17b4ee80-b7d3-405f-9938-d1da00e88d14",
                "nodeId": "17b4ee80-b7d3-405f-9938-d1da00e88d14",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "output"
              }
            ],
            "name": "Dataset",
            "type": "storage",
            "namespace": {
              "functionName": "clone_item",
              "projectName": "DataloopTasks",
              "serviceName": "pipeline-utils",
              "moduleName": "default_module",
              "packageName": "pipeline-utils"
            },
            "metadata": {
              "position": {
                "x": 10800,
                "y": 10100,
                "z": 0
              },
              "componentGroupName": "data",
              "repeatable": true,
              "variableDataset": "chunks-dataset"
            }
          },
          {
            "id": "cfd9c1b1-5588-4c4d-9c49-cebe666e22b1",
            "inputs": [
              {
                "portId": "910f6b87-eaed-480a-bef7-2f88e285718f",
                "nodeId": "910f6b87-eaed-480a-bef7-2f88e285718f",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "input"
              }
            ],
            "outputs": [
              {
                "portId": "4f24469f-c901-4356-b2ec-ca1a297e69c6",
                "nodeId": "4f24469f-c901-4356-b2ec-ca1a297e69c6",
                "type": "Item",
                "name": "item",
                "displayName": "item",
                "io": "output"
              },
              {
                "portId": "6a7e832b-cdea-4610-bcbd-5d2dc793e1a7",
                "nodeId": "6a7e832b-cdea-4610-bcbd-5d2dc793e1a7",
                "type": "Json",
                "name": "json",
                "displayName": "json",
                "io": "output"
              }
            ],
            "name": "nv-embedqa-e5v5",
            "type": "ml",
            "namespace": {
              "functionName": "embed",
              "moduleName": "nim-embeddings-module",
              "packageName": "nim-nv-embedqa-e5-v5"
            },
            "appName": "NIM Nv Embedqa E5 V5",
            "dpkName": "nim-nv-embedqa-e5-v5",
            "metadata": {
              "position": {
                "x": 11200,
                "y": 10100,
                "z": 0
              },
              "modelConfig": {
                "nim_model_name": "nvidia/nv-embedqa-e5-v5",
                "embeddings_size": 1024
              },
              "componentGroupName": "models",
              "repeatable": true,
              "variableModel": "nv-embedqa-e5v5",
              "pipelineNodeName": "nv-embedqa-e5v5",
              "mlType": "embeddings"
            }
          }
        ],
        "preview": "",
        "variables": [
          {
            "name": "chunks-dataset",
            "type": "Dataset",
            "description": "Dataset where text chunks will be stored. Used by both the PDF-to-Chunks processor and the intermediate storage node."
          },
          {
            "name": "nv-embedqa-e5v5",
            "type": "Model",
            "description": "Embedding model for vectorizing text chunks for retrieval. Recommended: NVIDIA NV-EmbedQA E5 v5",
            "value": "$var(nv-embedqa-e5v5__model)"
          }
        ]
      }
    ]
  },
  "dependencies": [
    {
      "name": "rag-pdf-processor"
    },
    {
      "name": "nim-nv-embedqa-e5-v5"
    }
  ],
  "variables": {
    "nv-embedqa-e5v5__model": "nim-nv-embedqa-e5-v5.models.nim-nv-embedqa-e5-v5"
  }
}